---
// Gallery: optional list of { url, alt, link? } from Drive folder or JSON
interface GalleryImage {
  url: string;
  alt: string;
  link?: string;
}
interface Props {
  title?: string;
  intro?: string;
  emptyMessage?: string;
  images?: GalleryImage[];
}
const { title = "GALERÍA", intro = "Un vistazo a nuestro espacio y platos.", emptyMessage = "Las fotos de la galería se configuran desde Drive o el contenido (JSON).", images = [] } = Astro.props;
---
<section id="galeria" class="gallery-section" aria-labelledby="galeria-heading">
  <div class="container">
    <h2 id="galeria-heading" class="section-title">{title}</h2>
    <p class="section-intro">{intro}</p>
    {images.length > 0 ? (
      <div class="gallery-scroll-wrapper" tabindex="0">
        <ul class="gallery-grid">
        {images.map((img) => (
          <li class="gallery-item">
            {img.link ? (
              <a href={img.link} target="_blank" rel="noopener noreferrer" class="gallery-link" aria-label={`Ver imagen: ${img.alt}`}>
                <img src={img.url} alt={img.alt} loading="lazy" class="gallery-img" />
              </a>
            ) : (
              <img src={img.url} alt={img.alt} loading="lazy" class="gallery-img" />
            )}
          </li>
        ))}
        </ul>
      </div>
    ) : (
      <p class="gallery-placeholder">{emptyMessage}</p>
    )}
  </div>
</section>

<style>
  .gallery-section {
    background: var(--color-bg);
  }
  .section-title {
    font-family: var(--font-title);
    font-size: clamp(2rem, 5vw, 2.75rem);
    letter-spacing: 0.05em;
    color: var(--color-text);
    margin-bottom: var(--space-2);
  }
  .section-intro {
    color: var(--color-muted);
    margin-bottom: var(--space-6);
  }
  .gallery-scroll-wrapper {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    margin-inline: calc(-1 * var(--section-padding-x));
    padding-inline: var(--section-padding-x);
    scrollbar-width: thin;
  }
  @media (max-width: 768px) {
    .gallery-scroll-wrapper {
      margin-inline: calc(-1 * var(--space-4));
      padding-inline: var(--space-4);
    }
  }
  .gallery-scroll-wrapper:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }
  .gallery-grid {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: nowrap;
    gap: var(--space-4);
    width: max-content;
  }
  .gallery-item {
    flex: 0 0 auto;
    width: min(280px, 85vw);
  }
  .gallery-link {
    display: block;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid var(--color-border);
  }
  .gallery-img,
  .gallery-grid img {
    width: 100%;
    aspect-ratio: 4/3;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid var(--color-border);
  }
  .gallery-link .gallery-img {
    border: none;
  }
  .gallery-placeholder {
    color: var(--color-muted);
    font-style: italic;
  }
</style>
